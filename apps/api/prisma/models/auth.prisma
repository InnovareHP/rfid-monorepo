model user_table {
  id                      String                 @id
  user_name               String
  user_email              String                 @unique
  user_email_verified     Boolean
  user_image              String?
  user_created_at         DateTime               @db.Timestamptz(3)
  user_updated_at         DateTime               @db.Timestamptz(3)
  user_ban_expires        DateTime?              @db.Timestamptz(3)
  user_is_active          Boolean                @default(false)
  user_stripe_customer_id String?
  twoFactorEnabled        Boolean?
  user_is_onboarded       Boolean                @default(false)
  user_role               String                 @default("user")
  user_ban_reason         String?
  user_is_banned             Boolean                @default(false)
  invitation_tables       invitation_table[]
  member_tables           member_table[]
  user_account_tables     user_account_table[]
  user_onboarding_table   user_onboarding_table?
  Board               Board[]
  History             History[]

  SupportTicket SupportTicket[] @relation("SupportTicketCreateBy")
  SupportTicketAssignedTo SupportTicket[] @relation("SupportTicketAssignedTo")
  SupportLiveChat SupportLiveChat[] @relation("SupportLiveChatSender")
  SupportTicketMessage SupportTicketMessage[] @relation("SupportTicketMessageSender")
  SupportLiveChatMessage SupportLiveChatMessage[] @relation("SupportLiveChatMessageSender")
  SupportLiveChatAttachment SupportLiveChatAttachment[] @relation("SupportLiveChatAttachmentSender")
  SupportHistory SupportHistory[] @relation("SupportHistorySender")
  SupportTicketRating SupportTicketRating[] @relation("SupportTicketRatingCreatedBy")

  @@map("user_table")
  @@schema("auth_schema")
}

model user_account_table {
  id                                   String     @id
  user_account_account_id              String
  user_account_provider_id             String
  user_account_user_id                 String
  user_account_access_token            String?
  user_account_refresh_token           String?
  user_account_id_token                String?
  user_account_access_token_expires_at DateTime?  @db.Timestamptz(3)
  user_account_scope                   String?
  user_account_password                String?
  user_account_created_at              DateTime   @db.Timestamptz(3)
  user_account_updated_at              DateTime   @db.Timestamptz(3)
  user_table                           user_table @relation(fields: [user_account_user_id], references: [id], onDelete: Cascade)

  @@map("user_account_table")
  @@schema("auth_schema")
}

model user_onboarding_table {
  user_onboarding_id             String     @id @default(uuid())
  user_onboarding_user_id        String     @unique
  user_onboarding_hear_about     String
  user_onboarding_how_to_use     String
  user_onboarding_what_to_expect String
  user_onboarding_created_at     DateTime   @default(now()) @db.Timestamptz(3)
  user_onboarding_user_table     user_table @relation(fields: [user_onboarding_user_id], references: [id], onDelete: Cascade)

  @@map("user_onboarding_table")
  @@schema("auth_schema")
}

model verification_table {
  id                      String    @id
  verification_identifier String
  verification_value      String
  verification_expires_at DateTime  @db.Timestamptz(3)
  verification_created_at DateTime? @db.Timestamptz(3)
  verification_updated_at DateTime? @db.Timestamptz(3)

  @@map("verification_table")
  @@schema("auth_schema")
}

model organization_table {
  id                      String             @id
  organization_name       String             @map("name")
  organization_slug       String?            @unique @map("slug")
  organization_logo       String?            @map("logo")
  organization_created_at DateTime           @map("createdAt")
  organization_metadata   String?            @map("metadata")


  invitation_tables       invitation_table[]
  member_tables           member_table[]
  // Referral              Referral[]
  // referralCounty        referralCounty[]
  // LeadField           LeadField[]
  // Lead                Lead[]
  Board               Board[]
  Field               Field[]
  // ReferralField       ReferralField[]
  boardCounty         boardCounty[]

  @@map("organization_table")
  @@schema("auth_schema")
}

model member_table {
  id                  String             @id
  organizationId      String
  userId              String
  member_role         String             @map("role")
  member_created_at   DateTime           @map("createdAt")
  organization_table  organization_table @relation(fields: [organizationId], references: [id], onDelete: Cascade)
  user_table          user_table         @relation(fields: [userId], references: [id], onDelete: Cascade)
  marketing              marketing[]
  mileage              mileage[]
  expense              expense[]

  @@map("member_table")
  @@schema("auth_schema")
}

model invitation_table {
  id                    String             @id
  organization_id       String             @map("organizationId")
  invitation_email      String             @map("email")
  invitation_role       String?            @map("role")
  invitation_status     String             @map("status")
  invitation_created_at DateTime           @map("createdAt") @default(now())
  invitation_expires_at DateTime           @map("expiresAt")
  invitation_inviter_id String             @map("inviterId")
  user_table            user_table         @relation(fields: [invitation_inviter_id], references: [id], onDelete: Cascade)
  organization_table    organization_table @relation(fields: [organization_id], references: [id], onDelete: Cascade)

  @@map("invitation_table")
  @@schema("auth_schema")
}
